
((function(){var a,b,c,d,e,f,g=Object.prototype.hasOwnProperty;e=this,a=typeof exports!="undefined"&&exports!==null&&this||(this.Linc={}),a._functions={},a._defaults={namespace:"",context:e},a.add=function(){var a,b,c,e,f,g,h,i,j;b=arguments[0],a=arguments[arguments.length-1],e=[],f={options:d(arguments[1])?arguments[1]:{},init:a},~b.indexOf(".")?(e=b.split("."),b=e.shift()):this._defaults.namespace&&(e=this._defaults.namespace.split("."));if(e.length){j=[];for(h=0,i=e.length;h<i;h++)c=e[h],(g=this._functions)[c]==null&&(g[c]={}),j.push(this._functions[c][b]=f);return j}return this._functions[b]=f},a.run=function(a){var d,e,f,h,i,j,k,l,m,n,o,p,q;a==null&&(a={}),e=(n=a.context)!=null?n:this._defaults.context,i=(o=a.namespace)!=null?o:this._defaults.namespace,d=a.all,d?i=function(){var a,b;a=this._functions,b=[];for(h in a){if(!g.call(a,h))continue;i=a[h],c(i.init)||b.push(h)}return b}.call(this):i=b(i)?i:[i],i.push(null),q=[];for(l=0,m=i.length;l<m;l++)j=i[l],f=(p=this._functions[j])!=null?p:this._functions,q.push(function(){var a;a=[];for(h in f){if(!g.call(f,h))continue;k=f[h],c(k.init)&&(!k.options.once||!k.called?(k.init.call(e),a.push(k.called=!0)):a.push(void 0))}return a}());return q},a.setDefaults=function(a){var b,c;for(b in a){if(!g.call(a,b))continue;c=a[b],this._defaults[b]=c}return this._defaults},b=(f=Array.isArray)!=null?f:function(a){return Object.prototype.toString.call(a)==="[object Array]"},c=function(a){return Object.prototype.toString.call(a)==="[object Function]"},d=function(a){return a===Object(a)}})).call(this)